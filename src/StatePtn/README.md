# State Pattern

## state패턴이란?
상태를 클래스로 표현하는 패턴

## state패턴의 구성
- state: 상태를 나타내며, **상태가 변할때마다 다른 동작을 하는 인터페이스**를 결정. 이 인터페이스는 상태에 의존한 동작을 하는 메소드의 집합이 됨  
- concreteState: 구체적인 각각의 상태를 표현. state인터페이스를 구현한 역할.
- Context: State패턴의 이용자에게 필요한 인스턴스를 결정. 현재 상태를 나타내는 concretestate의 인스턴스를 가지고 있음. 

## state패턴과 divide&conquer 전략
divide&conquer는 큰 문제를 해결할수있을정도로 작은 문제들로 나누어서 해결하는 전략. state패턴에서는 각각의 구체적인 상태를 각 클래스로 표현하여 문제를 분할한 것. **state패턴을 사용하지 않는다면 각 상태에 의존하는 메소드를 이용할때 조건문을 사용하여 구현해야함**. 따라서 state가 많아질수록 메소드가 복잡하고 무거워짐. 

## 상태에 의존한 처리
state인터페이스로 선언되는 메소드는 모두 **상태에따라 동작이 달라지는 처리**들임. state패턴은 이렇게 상태에 의존한 처리를 다음 두가지로 표현하고 있음  

- 추상메소드로 선언하고 인터페이스로 함(State인터페이스)   
- 구상메소드로서 구현하고 각각의 클래스로 함(DayState,NightState)  

## 상태전환의 처리
State패턴을 사용할경우 **상태전환을 누가 관리**해야 하는지 주의해야함.  

### ConcreteState가 상태전환을 처리
예제프로그램에서는 DayState, NightState클래스의 changeState메소드를 호출함으로써 상태전환이 이루어짐. 하지만 ConcreteState에 직접 상태전환을 맡기게 되면 클래스사이의 의존관계가 깊어짐. 왜냐면 changeState메소드 안에 상태전환이 이루어지기 위해선 다른 ConcreteState의 역할을 알아야하기 때문. 

### Context가 상태전환을 처리
모든 상태전환을 Context역할인 SafeFrame에 맡기게 되면 각 ConcreteState의 독립성이 높아짐. 하지만 이렇게 되면 Context역할이 모든 ConcreteState 역할을 알아야함. 이는 Mediator패턴을 적용하여 해결할수 있음 

### 상태 table을 사용하여 설계
state패턴을 적용하지않고 상태테이블을 설계하여 상태를 관리하는 방법. 상태전환이 일정한경우 입력할때의 상태값과 이에 대응하는 출력할때의 상태값으로 이루어진 표를 기초로 프로그램을 설계할수 있음  
